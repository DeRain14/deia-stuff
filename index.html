<!DOCTYPE html>
<html>
	<head>

    <!--
    AR.js workshop
    Author: Matt Nutsch
    Date: 6-20-2018
    Description: This is sample code for a workshop on developing an AR.js app.
    Notes:
    This code is based in part on Jerome Etienne's examples of AR.js at: https://github.com/jeromeetienne/AR.js/tree/master/aframe
    It is also based in part on the AFrame documentation, available at: https://aframe.io/docs

    Go to this URL to run this code in a mobile web browser: https://mnutsch.github.io/arjs_workshop/start/index.html
    Download and print this image for the AR target marker: https://github.com/mnutsch/mnutsch.github.io/raw/master/arjs_workshop/start/Hiro%20pattern%20with%20border.pdf
    -->

    <!-- include a-frame -->
    <script src="https://mnutsch.github.io/arjs_workshop/start/vendor/aframe/build/aframe.min.js"></script>

    <!-- include ar.js for aframe -->
    <script src='https://mnutsch.github.io/arjs_workshop/start/vendor/arjs/build/aframe-ar.js'></script>
    <script>ARjs.Context.baseURL = 'https://mnutsch.github.io/arjs_workshop/start/vendor/three.js/'</script>
    <!-- Note: the above libraries are included with absolute URL's, because Github.io seems to prefer those. Change them to relative URL's -->

    <script>		
      //wait until the page loads to perform the following
      window.onload = function () 
      {

        var intervalLength = 20; //determines the speed of the animation (milliseconds to wait between ticks)

        //define the scene, for ease of interacting with it
        var scene = document.querySelector('a-scene');       

        //ADD JAVASCRIPT CODE HERE...

        //Timer for animations
        setInterval(function()
        {

          //ADD CODE HERE TO DO THINGS...
          
        }, intervalLength);

      }
    </script>

  </head>

  <!-- start the body of your page -->
  <body style='margin : 0px; overflow: hidden;'>
    <!-- add some info at the top of the page -->
    <div style='position: fixed; top: 10px; width:100%; text-align: center; z-index: 1; color: white;'>
      Instructions:<br/>
      Point your camera at the target marker.
    </div>    

    <!-- Define your 3d scene and enabled ar.js -->
    <a-scene debug embedded arjs='trackingMethod: best; debugUIEnabled: false;'>

      <!-- Declare assets for use in the scene. -->
      <a-assets timeout="1000">
        <!-- Declare assets here. These are things like images or 3D models. -->    
           
        <!-- Example of how to declare a 3D model asset. -->
        <!--<a-asset-item id="3DModel-obj" src="3Dmodel.obj"></a-asset-item preload="auto">-->
        <!-- Example of how to declare a skin for a 3D model asset. -->
        <!--<a-asset-item id="3DModel-mtl" src="3DModel.mtl"></a-asset-item>-->
      
      </a-assets>

      <!-- Create a anchor to attach your augmented reality -->
      <a-anchor hit-testing-enabled='true'>

      <!-- Credit to Poly by Google for the model: https://poly.google.com/view/dA5osnS0Rzj -->
      <!-->a-asset-item id="jelly-glb" src="jellyfish-model.glb"></!--a-asset-item> -->
      <img id="portfolio-thumb" src="targets/img_2177.jpg">
      <video
        id="portfolio-video"
        autoplay
        muted
        crossorigin="anonymous"
        loop="true"
        src="mock.mp4">
      </video>
    </a-assets>

    <a-camera
      position="0 4 10"
      raycaster="objects: .cantap"
      cursor="fuse: false; rayOrigin: mouse;">
    </a-camera>

    <a-light type="directional" intensity="0.5" position="1 1 1"></a-light>

    <a-light type="ambient" intensity="1"></a-light>

    <!-- Note: "name:" must be set to the name of the image target uploaded to the 8th Wall Console -->
    <a-entity
      xrextras-named-image-target="name: img_2177"
      xrextras-play-video="video: #portfolio-video; thumb: #portfolio-thumb; canstop: true"
      geometry="primitive: plane; height: 1; width: 0.79;">
    </a-entity>

    <!-- Note: "name:" must be set to the name of the image target uploaded to the 8th Wall Console -->
    <!--a-entity xrextras-named-image-target="name: model-target">
      <!-- Add a child entity that can be rotated independently of the image target. -->
      <!--a-entity xrextras-one-finger-rotate gltf-model="#jelly-glb"></a-entity>
    </a-entity>

  </a-scene>

</body>
</html>
